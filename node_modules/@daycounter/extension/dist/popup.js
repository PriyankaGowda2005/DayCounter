import{u,r as l,j as e,c as p,R as g}from"./popup2.js";import{g as j,c as d,f}from"./utils.js";const o={exam:"üìù",hackathon:"üíª",assignment:"üìã",deadline:"‚è∞",personal:"üë§",work:"üíº",default:"üìÖ"},y=()=>{const{events:s,loadEvents:t,isLoading:a}=u(),[r,x]=l.useState([]);l.useEffect(()=>{t()},[t]),l.useEffect(()=>{if(s.length>0){const n=j(s,3);if(x(n),n.length>0){const i=n[0],h=d(i.targetAt,i.startAt);chrome.action.setBadgeText({text:h.days.toString()}),chrome.action.setBadgeBackgroundColor({color:"#3B82F6"})}else chrome.action.setBadgeText({text:""})}else chrome.action.setBadgeText({text:""})},[s]);const c=()=>{chrome.tabs.create({url:"https://daycounter.app"})},m=()=>{chrome.runtime.openOptionsPage()};return a?e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:"üìÖ"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"DayCounter"})]}),e.jsx("button",{onClick:m,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:"‚öôÔ∏è"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:r.length===0?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("span",{className:"text-4xl",children:"üìÖ"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No upcoming events"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Create your first countdown event to get started."}),e.jsxs("button",{onClick:c,className:"btn-primary w-full flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"‚ûï"}),e.jsx("span",{children:"Add Event"})]})]}):e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-700 mb-3",children:["Upcoming Events (",r.length,")"]}),r.map(n=>e.jsx(b,{event:n},n.id)),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("button",{onClick:c,className:"btn-secondary w-full flex items-center justify-center space-x-2",children:[e.jsx("span",{children:"üîó"}),e.jsx("span",{children:"Open Full App"})]})})]})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[s.length," total events"]}),e.jsx("button",{onClick:c,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Manage Events"})]})})]})},b=({event:s})=>{const t=d(s.targetAt,s.startAt),a=s.icon||o[s.category]||o.default;return e.jsx("div",{className:"countdown-item",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-lg",children:a}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-xs",children:"üïê"}),e.jsx("span",{className:"text-xs text-gray-500",children:f(t)})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(t.progress*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-blue-600 h-1 rounded-full transition-all duration-300",style:{width:`${Math.min(t.progress*100,100)}%`}})})]})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.isOverdue?"bg-red-100 text-red-800":t.days<=1?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:t.isOverdue?"Overdue":`${t.days}d`})]})})};p.createRoot(document.getElementById("popup-root")).render(e.jsx(g.StrictMode,{children:e.jsx(y,{})}));
